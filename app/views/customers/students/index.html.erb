<h1>Students</h1>
<%= form_with(url: customers_students_path(deleted: params[:deleted]) , method: :get) do |search_fields| %>
  <%= render "customers/students/partial/search_student", search_fields: search_fields %>
<% end %>
<br>
<div class="table-responsive">
  <table class = 'table mx-auto table-striped table-bordered table-condensed text-center align-middle'>
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Age</th>
        <th scope="col">Address</th>
        <th scope="col">Birthday</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <% @students.each_with_index do |student, index| %>
        <tr id="student-<%= student.id %>">
          <td>
            <% if index > 0 %>
              <%= link_to '⇑', swap_positions_customers_student_path(id: student.id, student2_id: @students[index - 1].id),data: {turbo_method: :put}, class: "btn btn-warning"  %>
            <% end %>
            <% if index < @students.size - 1  %>
              <%= link_to '⇓', swap_positions_customers_student_path(id: student.id, student2_id: @students[index + 1].id),data: {turbo_method: :put}, class: "btn btn-warning"  %>
            <% end %>
          </td>
          <td><%= student.id %></td>
          <td><%= link_to student.name, customers_student_path(student), class: "text-decoration-none text-dark fw-bold" %></td>
          <td><%= student.age %></td>
          <td><%= student.address %></td>
          <td><%= student.birthday %></td>
          <td>
            <% if student.deleted? %>
              <%= link_to 'Restore', restore_customers_student_path(student.id), data: {turbo_method: :put, turbo_confirm: 'Restore?'}, class: "btn btn-primary"  %>
            <% else %>
              <%= link_to 'Media', media_customers_student_path(student), class: "btn btn-primary"  %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<div>
  <%= link_to 'New Student', new_customers_student_path, class: "btn btn-primary mb-2" %>
  <%= link_to 'Active Students', customers_students_path, class: "btn btn-primary mb-2" %>
  <%= link_to 'Show Deleted Students', customers_students_path(deleted: true), class: "btn btn-primary mb-2 float-end" %>
</div>
<div class="d-flex justify-content-end"><%= paginate @students, theme: 'bootstrap-5'%></div>
